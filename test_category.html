<!DOCTYPE html>
<html>
<head>
    <title>分类测试</title>
    <script>
        let currentCategory = 'all';

        function switchCategory(type) {
            console.log('=== Switching category ===');
            console.log('From:', currentCategory);
            console.log('To:', type);
            currentCategory = type;
            console.log('After setting, currentCategory=', currentCategory);
        }

        function testCategories() {
            console.log('开始测试分类切换...');
            switchCategory('stock_cn');
            console.log('Current category is now:', currentCategory);
        }

        window.onload = testCategories;
    </script>
</head>
<body>
    <h1>分类测试</h1>
    <button onclick="switchCategory('stock_cn')">A股</button>
    <button onclick="switchCategory('stock_hk')">港股</button>
    <button onclick="switchCategory('stock_us')">美股</button>
    <button onclick="switchCategory('fund')">基金</button>
    <button onclick="switchCategory('all')">全部</button>
    <p id="result"></p>
    <script>
        setInterval(() => {
            document.getElementById('result').innerText = '当前分类: ' + currentCategory;
        }, 100);
    </script>
</body>
</html>